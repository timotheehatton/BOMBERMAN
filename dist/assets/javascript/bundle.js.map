{"version":3,"sources":["node_modules/browser-pack/_prelude.js","../sources/javascript/game_characters.js","../sources/javascript/game_map.js","../sources/javascript/index.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import {exportMap, exportMapSize} from './game_map.js';\n\nvar playerStatus = []\n\nclass Player\n{\n  constructor(lives, posX, posY, name, startDirection)\n  {\n    this.lives = lives\n    this.startDirection = startDirection\n    this.posX = posX\n    this.posY = posY\n    this.status = startDirection\n    this.div = document.querySelector('.map')\n    this.key = []\n    this.name = name\n  }\n\n  create()\n  {\n    let that = this\n    let createDiv = document.createElement('div')\n    createDiv.classList.add('map--perso')\n    createDiv.classList.add('map--' + that.status)\n    createDiv.setAttribute('id', that.name)\n    that.div.appendChild(createDiv)\n    playerStatus.push({\n      name: that.name,\n      x: that.posX,\n      y: that.posY,\n      speedBonus: 0,\n      BombPower: 0,\n      BombNumber: 0,\n      healthNumber: that.lives,\n      direction: this.startDirection,\n    })\n\n    if(that.name === 'player1')\n    {\n      const perso1 = document.querySelector('#' + playerStatus[0].name)\n      perso1.style.left = playerStatus[0].x + 'px'\n      perso1.style.top  = playerStatus[0].y + 'px'\n    }\n    else if(that.name === 'player2')\n    {\n      const perso2 = document.querySelector('#' + playerStatus[1].name)\n      perso2.style.right = playerStatus[1].x + 'px'\n      perso2.style.bottom  = playerStatus[1].y + 'px'\n\n    }\n  }\n  updateDirection()\n  {\n    let that = this\n    let persoDiv = document.querySelector('#' + that.name)\n    persoDiv.classList.remove('map--perso_down', 'map--perso_up', 'map--perso_right',\n    'map--perso_left')\n    persoDiv.classList.add('map--' + playerStatus[0].direction)\n  }\n\n  movesPerso()\n  {\n    let that = this\n    window.addEventListener('keydown', function(e)\n    {\n      e.preventDefault()\n      if (e.keyCode === that.key[0])\n      {\n        //up\n        let persoDiv = document.querySelector('#' + that.name)\n        let nextPos = playerStatus[0].y -1\n        if(nextPos >= 0 )\n        {\n          if(exportMap[nextPos][playerStatus[0].x].empty)\n          {\n            playerStatus[0].y -= 1\n            persoDiv.style.top = playerStatus[0].y * 50 + 'px'\n            playerStatus[0].direction = 'perso_up'\n            that.updateDirection()\n          }\n        }\n      }\n      else if (e.keyCode === that.key[1])\n      {\n        //right\n        let persoDiv = document.querySelector('#' + that.name)\n        let nextPos = playerStatus[0].x + 1\n        if(nextPos <= exportMapSize )\n        {\n          if(exportMap[nextPos][playerStatus[0].y].empty)\n          {\n            playerStatus[0].x += 1\n            persoDiv.style.left = playerStatus[0].x * 50 + 'px'\n            playerStatus[0].direction = 'perso_right'\n            that.updateDirection()\n          }\n        }\n      }\n      else if (e.keyCode === that.key[3])\n      {\n        //left\n        let persoDiv = document.querySelector('#' + that.name)\n        let nextPos = playerStatus[0].x - 1\n        if(nextPos >= 0 )\n        {\n          if(exportMap[nextPos][playerStatus[0].y].empty)\n          {\n            playerStatus[0].x -= 1\n            persoDiv.style.left = playerStatus[0].x * 50 + 'px'\n            playerStatus[0].direction = 'perso_left'\n            that.updateDirection()\n          }\n        }\n      }\n      else if (e.keyCode === that.key[2])\n      {\n        //down\n        let persoDiv = document.querySelector('#' + that.name)\n        let nextPos = playerStatus[0].y + 1\n        if(nextPos <= exportMapSize)\n        {\n          if(exportMap[nextPos][playerStatus[0].x].empty)\n          {\n            playerStatus[0].y += 1\n            persoDiv.style.top = playerStatus[0].y * 50 + 'px'\n            playerStatus[0].direction = 'perso_down'\n            that.updateDirection()\n          }\n        }\n      }\n    })\n  }\n}\n\nconst player1 = new Player(3, 0, 0, 'player1', 'perso_down')\nplayer1.create()\nplayer1.key = [38, 39, 40, 37, 32]\nplayer1.movesPerso()\n\nconst player2 = new Player(3, 0, 0, 'player2', 'perso_up')\nplayer2.create()\n","class Map\n{\n  constructor(size)\n  {\n    this.size = size\n    this.container = document.querySelector('.map')\n    this.gameMap = []\n  }\n\n  setUnbreakable()\n  {\n    let that = this\n    for (let i = 1; i < that.gameMap.length - 1; i += 2)\n    {\n      for (let j = 1; j < that.gameMap[i].length - 1; j += 2)\n      {\n        that.gameMap[i][j].breakable = false;\n        that.gameMap[i][j].empty = false\n        let unbreakBlock = document.querySelector('#block'+ i + j)\n        unbreakBlock.classList.add('map--unbreak')\n      }\n    }\n  }\n\n  setBreakable()\n  {\n    let that = this\n    for (let i = 0; i < that.gameMap.length; i ++)\n    {\n      for (let j = 0; j < that.gameMap[i].length; j ++)\n      {\n        if\n        ( (i === 0 && j === 0) ||\n          (i === that.gameMap.length - 1 && j === that.gameMap.length - 1) )\n        {\n          let spawnDiv = document.querySelector('#block'+ i + j)\n          spawnDiv.classList.add('map--spawn')\n          that.gameMap[i][j].breakable = null\n        }\n        if\n        ( (i === 1 && j === 0) ||\n          (i === 0 && j === 1) ||\n          (i === that.gameMap.length - 2 && j === that.gameMap.length - 1) ||\n          (i === that.gameMap.length - 1 && j === that.gameMap.length - 2) )\n        {\n          that.gameMap[i][j].breakable = null\n        }\n        else if (that.gameMap[i][j].breakable === null)\n        {\n          let rand = Math.random()\n          if(rand < 0.1)//0.6\n          {\n            that.gameMap[i][j].breakable = true\n            that.gameMap[i][j].empty = false\n            let unbreakBlock = document.querySelector('#block'+ i + j)\n            unbreakBlock.classList.add('map--break')\n          }\n        }\n      }\n    }\n  }\n\n\n  createMap()\n  {\n    let that = this\n    for (var i = 0; i < that.size; i++)\n    {\n      this.gameMap.push([])\n      for (var j = 0; j < that.size; j++)\n      {\n        this.gameMap[i].push({\n          x: i,\n          y: j,\n          breakable: null,\n          border: false,\n          empty: true,\n          bonus: null,\n        })\n        let createDiv = document.createElement('div')\n        createDiv.classList.add('map--block')\n        createDiv.setAttribute('id', 'block'+ i + j)\n        that.container.appendChild(createDiv)\n      }\n    }\n    that.setUnbreakable()\n    that.setBreakable()\n  }\n}\n\nconst createMap = new Map(15)\ncreateMap.createMap()\nvar exportMap = createMap.gameMap\nvar exportMapSize = createMap.size\nexport {exportMap, exportMapSize}\n","import Map from \"./game_map.js\"\nimport Perso from \"./game_characters.js\"\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zb3VyY2VzL2phdmFzY3JpcHQvZ2FtZV9jaGFyYWN0ZXJzLmpzIiwiLi4vc291cmNlcy9qYXZhc2NyaXB0L2dhbWVfbWFwLmpzIiwiLi4vc291cmNlcy9qYXZhc2NyaXB0L2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7OztBQ0FBOzs7O0FBRUEsSUFBSSxlQUFlLEVBQW5COztJQUVNLE07QUFFSixrQkFBWSxLQUFaLEVBQW1CLElBQW5CLEVBQXlCLElBQXpCLEVBQStCLElBQS9CLEVBQXFDLGNBQXJDLEVBQ0E7QUFBQTs7QUFDRSxTQUFLLEtBQUwsR0FBYSxLQUFiO0FBQ0EsU0FBSyxjQUFMLEdBQXNCLGNBQXRCO0FBQ0EsU0FBSyxJQUFMLEdBQVksSUFBWjtBQUNBLFNBQUssSUFBTCxHQUFZLElBQVo7QUFDQSxTQUFLLE1BQUwsR0FBYyxjQUFkO0FBQ0EsU0FBSyxHQUFMLEdBQVcsU0FBUyxhQUFULENBQXVCLE1BQXZCLENBQVg7QUFDQSxTQUFLLEdBQUwsR0FBVyxFQUFYO0FBQ0EsU0FBSyxJQUFMLEdBQVksSUFBWjtBQUNEOzs7OzZCQUdEO0FBQ0UsVUFBSSxPQUFPLElBQVg7QUFDQSxVQUFJLFlBQVksU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQWhCO0FBQ0EsZ0JBQVUsU0FBVixDQUFvQixHQUFwQixDQUF3QixZQUF4QjtBQUNBLGdCQUFVLFNBQVYsQ0FBb0IsR0FBcEIsQ0FBd0IsVUFBVSxLQUFLLE1BQXZDO0FBQ0EsZ0JBQVUsWUFBVixDQUF1QixJQUF2QixFQUE2QixLQUFLLElBQWxDO0FBQ0EsV0FBSyxHQUFMLENBQVMsV0FBVCxDQUFxQixTQUFyQjtBQUNBLG1CQUFhLElBQWIsQ0FBa0I7QUFDaEIsY0FBTSxLQUFLLElBREs7QUFFaEIsV0FBRyxLQUFLLElBRlE7QUFHaEIsV0FBRyxLQUFLLElBSFE7QUFJaEIsb0JBQVksQ0FKSTtBQUto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QTFCO0FBQ0EsSUFBSSxnQkFBZ0IsVUFBVSxJQUE5QjtRQUNRLFMsR0FBQSxTO1FBQVcsYSxHQUFBLGE7Ozs7O0FDOUZuQjs7OztBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7ZXhwb3J0TWFwLCBleHBvcnRNYXBTaXplfSBmcm9tICcuL2dhbWVfbWFwLmpzJztcblxudmFyIHBsYXllclN0YXR1cyA9IFtdXG5cbmNsYXNzIFBsYXllclxue1xuICBjb25zdHJ1Y3RvcihsaXZlcywgcG9zWCwgcG9zWSwgbmFtZSwgc3RhcnREaXJlY3Rpb24pXG4gIHtcbiAgICB0aGlzLmxpdmVzID0gbGl2ZXNcbiAgICB0aGlzLnN0YXJ0RGlyZWN0aW9uID0gc3RhcnREaXJlY3Rpb25cbiAgICB0aGlzLnBvc1ggPSBwb3NYXG4gICAgdGhpcy5wb3NZID0gcG9zWVxuICAgIHRoaXMuc3RhdHVzID0gc3RhcnREaXJlY3Rpb25cbiAgICB0aGlzLmRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXAnKVxuICAgIHRoaXMua2V5ID0gW11cbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gIH1cblxuICBjcmVhdGUoKVxuICB7XG4gICAgbGV0IHRoYXQgPSB0aGlzXG4gICAgbGV0IGNyZWF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgY3JlYXRlRGl2LmNsYXNzTGlzdC5hZGQoJ21hcC0tcGVyc28nKVxuICAgIGNyZWF0ZURpdi5jbGFzc0xpc3QuYWRkKCdtYXAtLScgKyB0aGF0LnN0YXR1cylcbiAgICBjcmVhdGVEaXYuc2V0QXR0cmlidXRlKCdpZCcsIHRoYXQubmFtZSlcbiAgICB0aGF0LmRpdi5hcHBlbmRDaGlsZChjcmVhdGVEaXYpXG4gICAgcGxheWVyU3RhdHVzLnB1c2goe1xuICAgICAgbmFtZTogdGhhdC5uYW1lLFxuICAgICAgeDogdGhhdC5wb3NYLFxuICAgICAgeTogdGhhdC5wb3NZLFxuICAgICAgc3BlZWRCb251czogMCxcbiAgICAgIEJvbWJQb3dlcjogMCxcbiAgICAgIEJvbWJOdW1iZXI6IDAsXG4gICAgICBoZWFsdGhOdW1iZXI6IHRoYXQubGl2ZXMsXG4gICAgICBkaXJlY3Rpb246IHRoaXMuc3RhcnREaXJlY3Rpb24sXG4gICAgfSlcblxuICAgIGlmKHRoYXQubmFtZSA9PT0gJ3BsYXllcjEnKVxuICAgIHtcbiAgICAgIGNvbnN0IHBlcnNvMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgcGxheWVyU3RhdHVzWzBdLm5hbWUpXG4gICAgICBwZXJzbzEuc3R5bGUubGVmdCA9IHBsYXllclN0YXR1c1swXS54ICsgJ3B4J1xuICAgICAgcGVyc28xLnN0eWxlLnRvcCAgPSBwbGF5ZXJTdGF0dXNbMF0ueSArICdweCdcbiAgICB9XG4gICAgZWxzZSBpZih0aGF0Lm5hbWUgPT09ICdwbGF5ZXIyJylcbiAgICB7XG4gICAgICBjb25zdCBwZXJzbzIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHBsYXllclN0YXR1c1sxXS5uYW1lKVxuICAgICAgcGVyc28yLnN0eWxlLnJpZ2h0ID0gcGxheWVyU3RhdHVzWzFdLnggKyAncHgnXG4gICAgICBwZXJzbzIuc3R5bGUuYm90dG9tICA9IHBsYXllclN0YXR1c1sxXS55ICsgJ3B4J1xuXG4gICAgfVxuICB9XG4gIHVwZGF0ZURpcmVjdGlvbigpXG4gIHtcbiAgICBsZXQgdGhhdCA9IHRoaXNcbiAgICBsZXQgcGVyc29EaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoYXQubmFtZSlcbiAgICBwZXJzb0Rpdi5jbGFzc0xpc3QucmVtb3ZlKCdtYXAtLXBlcnNvX2Rvd24nLCAnbWFwLS1wZXJzb191cCcsICdtYXAtLXBlcnNvX3JpZ2h0JyxcbiAgICAnbWFwLS1wZXJzb19sZWZ0JylcbiAgICBwZXJzb0Rpdi5jbGFzc0xpc3QuYWRkKCdtYXAtLScgKyBwbGF5ZXJTdGF0dXNbMF0uZGlyZWN0aW9uKVxuICB9XG5cbiAgbW92ZXNQZXJzbygpXG4gIHtcbiAgICBsZXQgdGhhdCA9IHRoaXNcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpXG4gICAge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBpZiAoZS5rZXlDb2RlID09PSB0aGF0LmtleVswXSlcbiAgICAgIHtcbiAgICAgICAgLy91cFxuICAgICAgICBsZXQgcGVyc29EaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoYXQubmFtZSlcbiAgICAgICAgbGV0IG5leHRQb3MgPSBwbGF5ZXJTdGF0dXNbMF0ueSAtMVxuICAgICAgICBpZihuZXh0UG9zID49IDAgKVxuICAgICAgICB7XG4gICAgICAgICAgaWYoZXhwb3J0TWFwW25leHRQb3NdW3BsYXllclN0YXR1c1swXS54XS5lbXB0eSlcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwbGF5ZXJTdGF0dXNbMF0ueSAtPSAxXG4gICAgICAgICAgICBwZXJzb0Rpdi5zdHlsZS50b3AgPSBwbGF5ZXJTdGF0dXNbMF0ueSAqIDUwICsgJ3B4J1xuICAgICAgICAgICAgcGxheWVyU3RhdHVzWzBdLmRpcmVjdGlvbiA9ICdwZXJzb191cCdcbiAgICAgICAgICAgIHRoYXQudXBkYXRlRGlyZWN0aW9uKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gdGhhdC5rZXlbMV0pXG4gICAgICB7XG4gICAgICAgIC8vcmlnaHRcbiAgICAgICAgbGV0IHBlcnNvRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0aGF0Lm5hbWUpXG4gICAgICAgIGxldCBuZXh0UG9zID0gcGxheWVyU3RhdHVzWzBdLnggKyAxXG4gICAgICAgIGlmKG5leHRQb3MgPD0gZXhwb3J0TWFwU2l6ZSApXG4gICAgICAgIHtcbiAgICAgICAgICBpZihleHBvcnRNYXBbbmV4dFBvc11bcGxheWVyU3RhdHVzWzBdLnldLmVtcHR5KVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHBsYXllclN0YXR1c1swXS54ICs9IDFcbiAgICAgICAgICAgIHBlcnNvRGl2LnN0eWxlLmxlZnQgPSBwbGF5ZXJTdGF0dXNbMF0ueCAqIDUwICsgJ3B4J1xuICAgICAgICAgICAgcGxheWVyU3RhdHVzWzBdLmRpcmVjdGlvbiA9ICdwZXJzb19yaWdodCdcbiAgICAgICAgICAgIHRoYXQudXBkYXRlRGlyZWN0aW9uKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gdGhhdC5rZXlbM10pXG4gICAgICB7XG4gICAgICAgIC8vbGVmdFxuICAgICAgICBsZXQgcGVyc29EaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoYXQubmFtZSlcbiAgICAgICAgbGV0IG5leHRQb3MgPSBwbGF5ZXJTdGF0dXNbMF0ueCAtIDFcbiAgICAgICAgaWYobmV4dFBvcyA+PSAwIClcbiAgICAgICAge1xuICAgICAgICAgIGlmKGV4cG9ydE1hcFtuZXh0UG9zXVtwbGF5ZXJTdGF0dXNbMF0ueV0uZW1wdHkpXG4gICAgICAgICAge1xuICAgICAgICAgICAgcGxheWVyU3RhdHVzWzBdLnggLT0gMVxuICAgICAgICAgICAgcGVyc29EaXYuc3R5bGUubGVmdCA9IHBsYXllclN0YXR1c1swXS54ICogNTAgKyAncHgnXG4gICAgICAgICAgICBwbGF5ZXJTdGF0dXNbMF0uZGlyZWN0aW9uID0gJ3BlcnNvX2xlZnQnXG4gICAgICAgICAgICB0aGF0LnVwZGF0ZURpcmVjdGlvbigpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IHRoYXQua2V5WzJdKVxuICAgICAge1xuICAgICAgICAvL2Rvd25cbiAgICAgICAgbGV0IHBlcnNvRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0aGF0Lm5hbWUpXG4gICAgICAgIGxldCBuZXh0UG9zID0gcGxheWVyU3RhdHVzWzBdLnkgKyAxXG4gICAgICAgIGlmKG5leHRQb3MgPD0gZXhwb3J0TWFwU2l6ZSlcbiAgICAgICAge1xuICAgICAgICAgIGlmKGV4cG9ydE1hcFtuZXh0UG9zXVtwbGF5ZXJTdGF0dXNbMF0ueF0uZW1wdHkpXG4gICAgICAgICAge1xuICAgICAgICAgICAgcGxheWVyU3RhdHVzWzBdLnkgKz0gMVxuICAgICAgICAgICAgcGVyc29EaXYuc3R5bGUudG9wID0gcGxheWVyU3RhdHVzWzBdLnkgKiA1MCArICdweCdcbiAgICAgICAgICAgIHBsYXllclN0YXR1c1swXS5kaXJlY3Rpb24gPSAncGVyc29fZG93bidcbiAgICAgICAgICAgIHRoYXQudXBkYXRlRGlyZWN0aW9uKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbmNvbnN0IHBsYXllcjEgPSBuZXcgUGxheWVyKDMsIDAsIDAsICdwbGF5ZXIxJywgJ3BlcnNvX2Rvd24nKVxucGxheWVyMS5jcmVhdGUoKVxucGxheWVyMS5rZXkgPSBbMzgsIDM5LCA0MCwgMzcsIDMyXVxucGxheWVyMS5tb3Zlc1BlcnNvKClcblxuY29uc3QgcGxheWVyMiA9IG5ldyBQbGF5ZXIoMywgMCwgMCwgJ3BsYXllcjInLCAncGVyc29fdXAnKVxucGxheWVyMi5jcmVhdGUoKVxuIiwiY2xhc3MgTWFwXG57XG4gIGNvbnN0cnVjdG9yKHNpemUpXG4gIHtcbiAgICB0aGlzLnNpemUgPSBzaXplXG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFwJylcbiAgICB0aGlzLmdhbWVNYXAgPSBbXVxuICB9XG5cbiAgc2V0VW5icmVha2FibGUoKVxuICB7XG4gICAgbGV0IHRoYXQgPSB0aGlzXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGF0LmdhbWVNYXAubGVuZ3RoIC0gMTsgaSArPSAyKVxuICAgIHtcbiAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgdGhhdC5nYW1lTWFwW2ldLmxlbmd0aCAtIDE7IGogKz0gMilcbiAgICAgIHtcbiAgICAgICAgdGhhdC5nYW1lTWFwW2ldW2pdLmJyZWFrYWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGF0LmdhbWVNYXBbaV1bal0uZW1wdHkgPSBmYWxzZVxuICAgICAgICBsZXQgdW5icmVha0Jsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Jsb2NrJysgaSArIGopXG4gICAgICAgIHVuYnJlYWtCbG9jay5jbGFzc0xpc3QuYWRkKCdtYXAtLXVuYnJlYWsnKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNldEJyZWFrYWJsZSgpXG4gIHtcbiAgICBsZXQgdGhhdCA9IHRoaXNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoYXQuZ2FtZU1hcC5sZW5ndGg7IGkgKyspXG4gICAge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGF0LmdhbWVNYXBbaV0ubGVuZ3RoOyBqICsrKVxuICAgICAge1xuICAgICAgICBpZlxuICAgICAgICAoIChpID09PSAwICYmIGogPT09IDApIHx8XG4gICAgICAgICAgKGkgPT09IHRoYXQuZ2FtZU1hcC5sZW5ndGggLSAxICYmIGogPT09IHRoYXQuZ2FtZU1hcC5sZW5ndGggLSAxKSApXG4gICAgICAgIHtcbiAgICAgICAgICBsZXQgc3Bhd25EaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmxvY2snKyBpICsgailcbiAgICAgICAgICBzcGF3bkRpdi5jbGFzc0xpc3QuYWRkKCdtYXAtLXNwYXduJylcbiAgICAgICAgICB0aGF0LmdhbWVNYXBbaV1bal0uYnJlYWthYmxlID0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGlmXG4gICAgICAgICggKGkgPT09IDEgJiYgaiA9PT0gMCkgfHxcbiAgICAgICAgICAoaSA9PT0gMCAmJiBqID09PSAxKSB8fFxuICAgICAgICAgIChpID09PSB0aGF0LmdhbWVNYXAubGVuZ3RoIC0gMiAmJiBqID09PSB0aGF0LmdhbWVNYXAubGVuZ3RoIC0gMSkgfHxcbiAgICAgICAgICAoaSA9PT0gdGhhdC5nYW1lTWFwLmxlbmd0aCAtIDEgJiYgaiA9PT0gdGhhdC5nYW1lTWFwLmxlbmd0aCAtIDIpIClcbiAgICAgICAge1xuICAgICAgICAgIHRoYXQuZ2FtZU1hcFtpXVtqXS5icmVha2FibGUgPSBudWxsXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhhdC5nYW1lTWFwW2ldW2pdLmJyZWFrYWJsZSA9PT0gbnVsbClcbiAgICAgICAge1xuICAgICAgICAgIGxldCByYW5kID0gTWF0aC5yYW5kb20oKVxuICAgICAgICAgIGlmKHJhbmQgPCAwLjEpLy8wLjZcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aGF0LmdhbWVNYXBbaV1bal0uYnJlYWthYmxlID0gdHJ1ZVxuICAgICAgICAgICAgdGhhdC5nYW1lTWFwW2ldW2pdLmVtcHR5ID0gZmFsc2VcbiAgICAgICAgICAgIGxldCB1bmJyZWFrQmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmxvY2snKyBpICsgailcbiAgICAgICAgICAgIHVuYnJlYWtCbG9jay5jbGFzc0xpc3QuYWRkKCdtYXAtLWJyZWFrJylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIGNyZWF0ZU1hcCgpXG4gIHtcbiAgICBsZXQgdGhhdCA9IHRoaXNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoYXQuc2l6ZTsgaSsrKVxuICAgIHtcbiAgICAgIHRoaXMuZ2FtZU1hcC5wdXNoKFtdKVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGF0LnNpemU7IGorKylcbiAgICAgIHtcbiAgICAgICAgdGhpcy5nYW1lTWFwW2ldLnB1c2goe1xuICAgICAgICAgIHg6IGksXG4gICAgICAgICAgeTogaixcbiAgICAgICAgICBicmVha2FibGU6IG51bGwsXG4gICAgICAgICAgYm9yZGVyOiBmYWxzZSxcbiAgICAgICAgICBlbXB0eTogdHJ1ZSxcbiAgICAgICAgICBib251czogbnVsbCxcbiAgICAgICAgfSlcbiAgICAgICAgbGV0IGNyZWF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIGNyZWF0ZURpdi5jbGFzc0xpc3QuYWRkKCdtYXAtLWJsb2NrJylcbiAgICAgICAgY3JlYXRlRGl2LnNldEF0dHJpYnV0ZSgnaWQnLCAnYmxvY2snKyBpICsgailcbiAgICAgICAgdGhhdC5jb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlRGl2KVxuICAgICAgfVxuICAgIH1cbiAgICB0aGF0LnNldFVuYnJlYWthYmxlKClcbiAgICB0aGF0LnNldEJyZWFrYWJsZSgpXG4gIH1cbn1cblxuY29uc3QgY3JlYXRlTWFwID0gbmV3IE1hcCgxNSlcbmNyZWF0ZU1hcC5jcmVhdGVNYXAoKVxudmFyIGV4cG9ydE1hcCA9IGNyZWF0ZU1hcC5nYW1lTWFwXG52YXIgZXhwb3J0TWFwU2l6ZSA9IGNyZWF0ZU1hcC5zaXplXG5leHBvcnQge2V4cG9ydE1hcCwgZXhwb3J0TWFwU2l6ZX1cbiIsImltcG9ydCBNYXAgZnJvbSBcIi4vZ2FtZV9tYXAuanNcIlxuaW1wb3J0IFBlcnNvIGZyb20gXCIuL2dhbWVfY2hhcmFjdGVycy5qc1wiXG4iXX0="}